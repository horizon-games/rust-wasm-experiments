{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/utils.js","webpack:///./js/ui.js","webpack:///./js/libs/vector2D.js","webpack:///./js/libs/Ball.js","webpack:///./js/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","installedModules","0","installedWasmModules","wasmImportObjects","2","./ball_wasm","__wbg_sqrt_6ac1ec864938feb9","p0f64","exports","__wbg_random_918d3291fe65513c","__wbindgen_throw","p0i32","p1i32","__webpack_require__","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","head","document","getElementsByTagName","script","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","appendChild","1","forEach","wasmModuleId","installedWasmModuleData","importObject","req","fetch","WebAssembly","compileStreaming","all","then","items","instantiate","instantiateStreaming","x","arrayBuffer","bytes","res","w","instance","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","s","DEBOUNCE_RESIZE_CANVAS_MS","makeStage","_trackers","stage","width","innerWidth","height","innerHeight","track","tracker","debouncedResizeToWindow","fn","time","args","apply","this","debounce","addEventListener","cleanup","removeEventListener","prepareUI","rootNode","getElementById","infosNode","htmlRenderNode","div","className","style","position","top","left","zIndex","makeHtmlRenderNode","canvasRenderNode","canvas","makeCanvasRenderNode","renderModeToggles","modes","inputs","map","input","id","checked","onchange","getElementsByClassName","display","label","innerText","htmlFor","wrapper","ul","listStyle","paddingLeft","makeRenderModeToggle","canvasCtx","getContext","Vector2D","[object Object]","y","Math","sqrt","vector","get_length","scale","vector2D","libs_Ball","velocity_x","velocity_y","radius","mass","gravity","elasticity","friction","stage_width","stage_height","ball","xd","yd","sum_radius","delta","get_vector_2d","mtd","im1","im2","vector_velocity","normalized_mtd","normalize","vn","dot","impulse","ims1","ims2","random","BALL_MASS","BALL_GRAVITY","BALL_ELASTICITY","BALL_FRICTION","makeBall","velocityX","velocityY","wasm","Ball","updateBalls","balls","step","manageStageBorderCollision","j","checkBallCollision","resolveBallCollision","drawBallToCtx","ctx","color","fillStyle","beginPath","arc","PI","closePath","fill","drawBallToHtml","drawFunc","wasm-compute-js-render-canvas","clearRect","wasm-compute-js-render-html","innerHTML","join","js-compute-js-render-canvas","js-compute-js-render-html","lastFrameTimeMs","Array","from","_","js","setRandomPositionAndSpeedInBounds","loop","timestamp","requestAnimationFrame","toFixed","round"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + chunkId + \".bundle.js\"\n \t}\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \tfunction promiseResolve() { return Promise.resolve(); }\n\n \tvar wasmImportObjects = {\n \t\t2: function() {\n \t\t\treturn {\n \t\t\t\t\"./ball_wasm\": {\n \t\t\t\t\t\"__wbg_sqrt_6ac1ec864938feb9\": function(p0f64) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbg_sqrt_6ac1ec864938feb9\"](p0f64);\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbg_random_918d3291fe65513c\": function() {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbg_random_918d3291fe65513c\"]();\n \t\t\t\t\t},\n \t\t\t\t\t\"__wbindgen_throw\": function(p0i32,p1i32) {\n \t\t\t\t\t\treturn installedModules[1].exports[\"__wbindgen_throw\"](p0i32,p1i32);\n \t\t\t\t\t}\n \t\t\t\t}\n \t\t\t};\n \t\t},\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\thead.appendChild(script);\n \t\t\t}\n \t\t}\n\n \t\t// Fetch + compile chunk loading for webassembly\n\n \t\tvar wasmModules = {\"1\":[2]}[chunkId] || [];\n\n \t\twasmModules.forEach(function(wasmModuleId) {\n \t\t\tvar installedWasmModuleData = installedWasmModules[wasmModuleId];\n\n \t\t\t// a Promise means \"currently loading\" or \"already loaded\".\n \t\t\tif(installedWasmModuleData)\n \t\t\t\tpromises.push(installedWasmModuleData);\n \t\t\telse {\n \t\t\t\tvar importObject = wasmImportObjects[wasmModuleId]();\n \t\t\t\tvar req = fetch(__webpack_require__.p + \"\" + {\"2\":\"4783bab8b76c15aa2430\"}[wasmModuleId] + \".module.wasm\");\n \t\t\t\tvar promise;\n \t\t\t\tif(importObject instanceof Promise && typeof WebAssembly.compileStreaming === 'function') {\n \t\t\t\t\tpromise = Promise.all([WebAssembly.compileStreaming(req), importObject]).then(function(items) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(items[0], items[1]);\n \t\t\t\t\t});\n \t\t\t\t} else if(typeof WebAssembly.instantiateStreaming === 'function') {\n \t\t\t\t\tpromise = WebAssembly.instantiateStreaming(req, importObject);\n \t\t\t\t} else {\n \t\t\t\t\tvar bytesPromise = req.then(function(x) { return x.arrayBuffer(); });\n \t\t\t\t\tpromise = bytesPromise.then(function(bytes) {\n \t\t\t\t\t\treturn WebAssembly.instantiate(bytes, importObject);\n \t\t\t\t\t});\n \t\t\t\t}\n \t\t\t\tpromises.push(installedWasmModules[wasmModuleId] = promise.then(function(res) {\n \t\t\t\t\treturn __webpack_require__.w[wasmModuleId] = (res.instance || res).exports;\n \t\t\t\t}));\n \t\t\t}\n \t\t});\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// object with all WebAssembly.instance exports\n \t__webpack_require__.w = {};\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const DEBOUNCE_RESIZE_CANVAS_MS = 300;\n\nexport function makeStage() {\n  const _trackers = [];\n  const stage = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n    mode: \"wasm-compute-js-render-canvas\" // default mode\n  };\n  // track dom elements like canvas, div ... that will automatically be resized\n  stage.track = function(tracker) {\n    if (typeof tracker !== \"function\") {\n      throw new Error(\n        \"Must be a function that will be called on window resize to update width / height\"\n      );\n    }\n    tracker(stage);\n    _trackers.push(tracker);\n  };\n  const debouncedResizeToWindow = debounce(() => {\n    stage.width = window.innerWidth;\n    stage.height = window.innerHeight;\n    _trackers.forEach(tracker => {\n      tracker(stage);\n    });\n  }, DEBOUNCE_RESIZE_CANVAS_MS);\n  window.addEventListener(\"resize\", debouncedResizeToWindow, false);\n  return {\n    cleanup: () => {\n      window.removeEventListener(\"resize\", debouncedResizeToWindow);\n    },\n    stage\n  };\n}\n\nfunction debounce(fn, time) {\n  let timeout;\n  return function(...args) {\n    const functionCall = () => fn.apply(this, args);\n    clearTimeout(timeout);\n    timeout = setTimeout(functionCall, time);\n  };\n}\n","function makeCanvasRenderNode() {\n  const canvas = document.createElement(\"canvas\");\n  canvas.className =\n    \"wasm-compute-js-render-canvas js-compute-js-render-canvas\";\n  canvas.style.position = \"absolute\";\n  canvas.style.top = \"0px\";\n  canvas.style.left = \"0px\";\n  canvas.style.zIndex = -1;\n  return canvas;\n}\n\nfunction makeHtmlRenderNode() {\n  const div = document.createElement(\"div\");\n  div.className = \"wasm-compute-js-render-html js-compute-js-render-html\";\n  div.style.position = \"absolute\";\n  div.style.top = \"0px\";\n  div.style.left = \"0px\";\n  div.style.zIndex = -1;\n  return div;\n}\n\n/**\n * Creates the radio buttons for render modes\n * and binds it to stage.mode\n */\nfunction makeRenderModeToggle(modes = [], stage) {\n  const inputs = modes.map(mode => {\n    const input = document.createElement(\"input\");\n    input.name = \"render-mode\";\n    input.type = \"radio\";\n    input.value = mode.value;\n    input.id = mode.value;\n    input.checked = stage.mode === mode.value;\n    input.onchange = e => {\n      // hide previous active layer\n      [...document.getElementsByClassName(stage.mode)].forEach(\n        e => (e.style.display = \"none\")\n      );\n      stage.mode = e.target.value;\n      // show current active layer\n      [...document.getElementsByClassName(stage.mode)].forEach(\n        e => (e.style.display = \"block\")\n      );\n    };\n    const label = document.createElement(\"label\");\n    label.innerText = mode.label;\n    label.htmlFor = mode.value;\n    const wrapper = document.createElement(\"li\");\n    wrapper.appendChild(input);\n    wrapper.appendChild(label);\n    return wrapper;\n  });\n  const ul = document.createElement(\"ul\");\n  inputs.forEach(input => ul.appendChild(input));\n  ul.style.listStyle = \"none\";\n  ul.style.paddingLeft = \"20px\";\n  return ul;\n}\n\nexport function prepareUI(stage) {\n  const rootNode = document.getElementById(\"root\");\n  const infosNode = document.createElement(\"p\");\n  const htmlRenderNode = makeHtmlRenderNode();\n  const canvasRenderNode = makeCanvasRenderNode();\n  stage.track(({ width, height }) => {\n    canvasRenderNode.width = width;\n    canvasRenderNode.height = height;\n  });\n  stage.track(({ width, height }) => {\n    htmlRenderNode.style.width = `${width}px`;\n    htmlRenderNode.style.height = `${height}px`;\n  });\n  const renderModeToggles = makeRenderModeToggle(\n    [\n      {\n        value: \"wasm-compute-js-render-canvas\",\n        label: \"compute by WASM - render by JS into canvas\"\n      },\n      {\n        value: \"wasm-compute-js-render-html\",\n        label: \"compute by WASM - render by JS into html\"\n      },\n      {\n        value: \"js-compute-js-render-canvas\",\n        label: \"compute by JS - render by JS into canvas\"\n      },\n      {\n        value: \"js-compute-js-render-html\",\n        label: \"compute by JS - render by JS into html\"\n      }\n    ],\n    stage\n  );\n  rootNode.appendChild(renderModeToggles);\n  rootNode.appendChild(infosNode);\n  rootNode.appendChild(canvasRenderNode);\n  rootNode.appendChild(htmlRenderNode);\n\n  return {\n    rootNode,\n    infosNode,\n    canvasRenderNode,\n    canvasCtx: canvasRenderNode.getContext(\"2d\"),\n    htmlRenderNode\n  };\n}\n","class Vector2D {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  get_length() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n  dot(vector) {\n    return this.x * vector.x + this.y * vector.y;\n  }\n  normalize() {\n    return new Vector2D(this.x / this.get_length(), this.y / this.get_length());\n  }\n  scale(scale) {\n    return new Vector2D(this.x * scale, this.y * scale);\n  }\n}\n\nexport default Vector2D;\n","/**\n * Basic JS reimplementation of https://github.com/topheman/Ball.js\n *\n * Same exact implementation as the Rust/Wasm one in the ./crate folder\n */\n\nimport Vector2D from \"./vector2D\";\n\nclass Ball {\n  constructor(\n    x,\n    y,\n    velocity_x,\n    velocity_y,\n    radius,\n    mass,\n    gravity,\n    elasticity,\n    friction\n  ) {\n    this.x = x;\n    this.y = y;\n    this.velocity_x = velocity_x;\n    this.velocity_y = velocity_y;\n    this.radius = radius;\n    this.mass = mass;\n    this.gravity = gravity;\n    this.elasticity = elasticity;\n    this.friction = friction;\n  }\n  step() {\n    this.x = this.x + this.gravity * this.velocity_x;\n    this.y = this.y + this.gravity * this.velocity_y;\n    this.velocity_x = this.friction * this.velocity_x;\n    this.velocity_y = this.friction * this.velocity_y;\n  }\n  manageStageBorderCollision(stage_width, stage_height) {\n    // left border\n    if (this.x - this.radius < 0.0) {\n      this.velocity_x = -this.velocity_x * this.elasticity;\n      this.x = this.radius;\n    }\n    // right border\n    if (this.x + this.radius > stage_width) {\n      this.velocity_x = -this.velocity_x * this.elasticity;\n      this.x = stage_width - this.radius;\n    }\n    // top border\n    if (this.y - this.radius < 0.0) {\n      this.velocity_y = -this.velocity_y * this.elasticity;\n      this.y = this.radius;\n    }\n    // bottom border\n    if (this.y + this.radius > stage_height) {\n      this.velocity_y = -this.velocity_y * this.elasticity;\n      this.y = stage_height - this.radius;\n    }\n  }\n  checkBallCollision(ball) {\n    const xd = this.x - ball.x;\n    const yd = this.y - ball.y;\n\n    const sum_radius = this.radius + ball.radius;\n    const sqr_radius = sum_radius * sum_radius;\n\n    const dist_sqr = xd * xd + yd * yd;\n\n    if (dist_sqr <= sqr_radius) {\n      return true;\n    }\n    return false;\n  }\n  resolveBallCollision(ball) {\n    const RESTITUTION = 0.85;\n\n    //get the mtd\n    const delta = this.get_vector_2d(ball);\n    const d = delta.get_length();\n    // minimum translation distance to push balls apart after intersecting\n    const mtd = delta.scale((this.radius + ball.radius - d) / d);\n\n    // resolve intersection --\n    // inverse mass quantities\n    const im1 = 1 / this.mass;\n    const im2 = 1 / ball.mass;\n\n    // impact speed\n    const vector_velocity = new Vector2D(\n      this.velocity_x - ball.velocity_x,\n      this.velocity_y - ball.velocity_y\n    );\n    const normalized_mtd = mtd.normalize();\n    const vn = vector_velocity.dot(normalized_mtd);\n\n    // sphere intersecting but moving away from each other already\n    if (vn > 0.0) {\n      return;\n    }\n\n    // collision impulse\n    const i = (-(1.0 + RESTITUTION) * vn) / (im1 + im2);\n    const impulse = normalized_mtd.scale(i);\n\n    // change in momentum\n    const ims1 = impulse.scale(im1);\n    const ims2 = impulse.scale(im2);\n\n    this.velocity_x = (this.velocity_x + ims1.x) * this.elasticity;\n    this.velocity_y = (this.velocity_y + ims1.y) * this.elasticity;\n    ball.velocity_x = (ball.velocity_x - ims2.x) * this.elasticity;\n    ball.velocity_y = (ball.velocity_y - ims2.y) * this.elasticity;\n  }\n  setRandomPositionAndSpeedInBounds(stage_width, stage_height) {\n    this.x = this.random() * stage_width;\n    this.y = this.random() * stage_height;\n    this.velocity_x = this.random() * 10;\n    this.velocity_y = this.random() * 10;\n  }\n  get_vector_2d(ball) {\n    return new Vector2D(this.x - ball.x, this.y - ball.y);\n  }\n  random() {\n    return Math.random();\n  }\n}\n\nexport default Ball;\n","import { makeStage } from \"./utils\";\nimport { prepareUI } from \"./ui\";\nimport BallJS from \"./libs/Ball\";\n\nconst BALL_MASS = 1.3;\nconst BALL_GRAVITY = 1;\nconst BALL_ELASTICITY = 0.98;\nconst BALL_FRICTION = 1;\n\nimport(\"../crate/pkg\").then(module => {\n  /**\n   * Factory that will return either the original JavaScript version or the WebAssembly one\n   * Specify a `wasm` boolean as an attribute to choose either version\n   */\n  function makeBall({\n    x = 0,\n    y = 0,\n    velocityX = 0,\n    velocityY = 0,\n    radius = 15,\n    mass = BALL_MASS,\n    gravity = BALL_GRAVITY,\n    elasticity = BALL_ELASTICITY,\n    friction = BALL_FRICTION,\n    wasm = true\n  } = {}) {\n    return new (wasm ? module.Ball : BallJS)(\n      x,\n      y,\n      velocityX,\n      velocityY,\n      radius,\n      mass,\n      gravity,\n      elasticity,\n      friction\n    );\n  }\n\n  function updateBalls(balls) {\n    // move balls\n    balls.forEach(ball => ball.step());\n    // check balls vs border collision\n    balls.forEach(ball =>\n      ball.manageStageBorderCollision(stage.width, stage.height)\n    );\n    // check ball vs ball collision\n    for (let i = 0; i < balls.length; i++) {\n      for (let j = i + 1; j < balls.length; j++) {\n        if (balls[i].checkBallCollision(balls[j]) === true) {\n          balls[i].resolveBallCollision(balls[j]);\n        }\n      }\n    }\n  }\n\n  /**\n   * Update balls states\n   */\n  function update(d) {\n    delta = d;\n    updateBalls(balls[\"wasm\"]);\n    updateBalls(balls[\"js\"]);\n  }\n\n  /**\n   * Helper to draw a ball directly with JavaScript code\n   */\n  function drawBallToCtx(ball, ctx, color = \"#900000\") {\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  function drawBallToHtml(ball, color = \"#900000\") {\n    return `<div class=\"ball\" style=\"position:absolute;top:${ball.y -\n      ball.radius}px;left:${ball.x -\n      ball.radius}px;background:${color};width:${ball.radius *\n      2}px;height:${ball.radius * 2}px;border-radius:${ball.radius}px\"></div>`;\n  }\n\n  const drawFunc = {\n    \"wasm-compute-js-render-canvas\": function() {\n      canvasCtx.clearRect(0, 0, stage.width, stage.height);\n      balls[\"wasm\"].forEach(ball => drawBallToCtx(ball, canvasCtx, \"blue\"));\n    },\n    \"wasm-compute-js-render-html\": function() {\n      htmlRenderNode.innerHTML = balls[\"wasm\"]\n        .map(ball => drawBallToHtml(ball, \"darkblue\"))\n        .join(\"\");\n    },\n    \"js-compute-js-render-canvas\": function() {\n      canvasCtx.clearRect(0, 0, stage.width, stage.height);\n      balls[\"js\"].forEach(ball => drawBallToCtx(ball, canvasCtx, \"red\"));\n    },\n    \"js-compute-js-render-html\": function() {\n      htmlRenderNode.innerHTML = balls[\"js\"]\n        .map(ball => drawBallToHtml(ball, \"darkred\"))\n        .join(\"\");\n    }\n  };\n\n  /**\n   * Draw balls\n   */\n  function draw() {\n    infosNode.innerText = `Delta: ${delta.toFixed(\n      4\n    )}ms - FrameRate: ${Math.round(1000 / delta)} FPS`;\n    // draw balls in selected mode\n    drawFunc[stage.mode]();\n  }\n\n  /**\n   * Game loop\n   */\n  function loop(timestamp) {\n    requestAnimationFrame(loop);\n    update(timestamp - lastFrameTimeMs);\n    draw();\n    lastFrameTimeMs = timestamp;\n  }\n\n  // Execution\n\n  const MAX_BALLS = 10;\n\n  const { stage } = makeStage();\n  const { infosNode, canvasCtx, htmlRenderNode } = prepareUI(stage);\n\n  let delta = 0;\n  let lastFrameTimeMs = 0;\n\n  const balls = {\n    wasm: Array.from(Array(MAX_BALLS), _ => makeBall()),\n    js: Array.from(Array(MAX_BALLS), _ => makeBall({ wasm: false }))\n  };\n  balls[\"wasm\"].forEach(ball => {\n    ball.setRandomPositionAndSpeedInBounds(stage.width, stage.height);\n  });\n  balls[\"js\"].forEach(ball => {\n    ball.setRandomPositionAndSpeedInBounds(stage.width, stage.height);\n  });\n\n  loop();\n});\n// ⚠️ TODO ADD .catch\n"],"sourceRoot":""}